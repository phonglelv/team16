<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/layout}" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <script
            src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <script
            src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script
            src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>


    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bicycle Rental - Thuê xe đạp uy tín - chất lượng</title>
    <link rel="icon" href="./assets/img/images-logo.png" type="image/x-icon">
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
    />
    <link rel="stylesheet" href="/assets/css/style.css" />  
    <link rel="stylesheet" href="/assets/css/cart.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/assets/js/scripts.js">
</head>
<body>
<article layout:fragment="content" class="py-5" style="margin-top: 130px;">

    <div class="" style="margin-left: 100px; ">
        <h2 >Giỏ hàng của tôi</h2>
    </div>
    <table>
        <thead>
        <tr >
            <th>Sản phẩm</th>
            <th>Ảnh</th>
            <th>Giá</th>
            <th>Số lượng</th>
            <th>Tổng cộng</th>
            <th>Xóa</th>
        </tr>
        </thead>
        <tbody id="cart-items">
        <!-- Dữ liệu sản phẩm mẫu -->
        <tr ng-repeat="item in cart.items">
            <td>{{item.name}}</td>
            <td>   <img ng-src="/assets/images/{{item.image}}"  alt="" width="180px"></td>
            <td>{{item.price  | number:0}} VNĐ</td>
            <td> <input ng-change="cart.updateQuantity(item)" style="width: 50px;" ng-model="item.qty" type="number" min="1"></td>
            <td>{{item.qty * item.price | number:0}} VNĐ</td>
            <td><button ng-click="cart.remove(item.id)" >Xóa</button></td>
        </tr>

        <!-- Thêm các sản phẩm khác ở đây -->
        </tbody>
    </table>


    <div id="cart">

        <p class="total">Tổng tiền: <span id="cart-total">{{cart.amount|number:0}}</span> </p>
        <a id="checkout-button" style="text-decoration: none;" href="/order/checkout" class="c-btn">Thanh toán</a>

    </div>
    <script>
        $(document).ready(function () {
           // Function to check if the cart is empty
           function isCartEmpty() {
              return $('#cart-items tr').length === 0;
           }
     
           // Function to handle the checkout button click
           function handleCheckout() {
              if (isCartEmpty()) {
                 alert('Vui lòng thêm sản phẩm vào giỏ hàng trước khi thanh toán!');
              } else {
                 // Redirect to the checkout page
                 window.location.href = $('#checkout-button').attr('href');
              }
           }
     
           // Attach the click event to the checkout button
           $('#checkout-button').on('click', function (event) {
              event.preventDefault(); // Prevent the default behavior of the link
              handleCheckout();
           });
        });
     </script>
     
</article>
</body>
</html>
